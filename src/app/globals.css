/* src/app/globals.css - Alternative approach with CSS variables */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Define CSS variables for each theme */
  :root,
  [data-theme='dark'] {
    /* Dark theme (default) */
    --color-bg: #000000;
    --color-text-primary: #86efac;
    --color-text-secondary: #9ca3af;
    --color-text-tertiary: #6b7280;
    --color-text-command: #eab308;
    --color-text-white: #ffffff;
    --color-border: #22c55e;
    --color-border-darker: #166534;
    --color-active: #053516;
    --color-error: #dc2626;
    --color-success: #4ade80;
    --color-input-bg: #111827;
    --color-hover: rgba(34, 197, 94, 0.1);
    --color-accent: #22d3ee;
    --color-btn-bg: rgba(255, 255, 255, 0.07);
    --color-btn-bg-hover: rgba(255, 255, 255, 0.09);
    --texture-line-color: 34, 197, 94;
    --texture-opacity: 0.09;           
    --texture-grid-size: 100px;        
  }

  [data-theme='light'] {
    /* Light theme */
    --color-bg: #ffffff;
    --color-text-primary: #065f46;
    --color-text-secondary: #4b5563;
    --color-text-tertiary: #9ca3af;
    --color-text-command: #b45309;
    --color-text-white: #0a0a0a; 
    --color-border: #10b981;
    --color-border-darker: #059669;
    --color-active: #d1fae5;
    --color-error: #dc2626;
    --color-success: #059669;
    --color-input-bg: #ffffff;
    --color-hover: rgba(5, 150, 105, 0.1);
    --color-accent: #0284c7;
    --color-btn-bg: rgba(5, 150, 105, 0.05);
    --color-btn-bg-hover: rgba(5, 150, 105, 0.1);
    --texture-line-color: 59, 130, 246; 
    --texture-opacity: 0.09;           
    --texture-grid-size: 120px;        
  }

  [data-theme='amber'] {
    /* Amber theme */
    --color-bg: #1C140D;
    --color-text-primary: #FFB86C;
    --color-text-secondary: #D9A15D;
    --color-text-tertiary: #B08953;
    --color-text-command: #FFD173;
    --color-text-white: #FFB86C;
    --color-border: #FF9F1C;
    --color-border-darker: #8B5A00;
    --color-active: #4d2e08;
    --color-error: #FF6B6B;
    --color-success: #4ADE80;
    --color-input-bg: #1B1210;
    --color-hover: rgba(255, 184, 108, 0.08);
    --color-accent: #FFDDAA;
    --color-btn-bg: rgba(255, 184, 108, 0.05);
    --color-btn-bg-hover: rgba(255, 184, 108, 0.1);
    --texture-line-color: 251, 146, 60;  
    --texture-opacity: 0.05;           
    --texture-grid-size: 100px;
  }

  [data-theme='bsod'] {
    /* BSOD theme */
    --color-bg: #0B4DA8;
    --color-text-primary: #FFFFFF;
    --color-text-secondary: #CFE9FF;
    --color-text-tertiary: #9EC7FF;
    --color-text-command: #E1F0FF;
    --color-text-white: #FFFFFF;
    --color-border: #E6F3FF;
    --color-border-darker: #7FB3FF;
    --color-active: #0066FF;
    --color-error: #FF6B6B;
    --color-success: #00D084;
    --color-input-bg: #073A93;
    --color-hover: rgba(230, 243, 255, 0.06);
    --color-accent: #88B8FF;
    --color-btn-bg: rgba(230, 243, 255, 0.08);
    --color-btn-bg-hover: rgba(230, 243, 255, 0.15);
    --texture-line-color: 255, 255, 255; 
    --texture-opacity: 0.08;          
    --texture-grid-size: 80px;         
  }

    [data-theme='synthwave'] {
    /* Synthwave theme */
    --color-bg: #1A103C;
    --color-text-white: #FF00E5;
    --color-text-primary: #FF00E5;
    --color-text-secondary: #00BFFF;
    --color-text-tertiary: #7B61FF;
    --color-text-command: #F7B801;
    --color-border: #FF00E5;
    --color-border-darker: #00BFFF;
    --color-active: #4C00A4;
    --color-error: #FF1B1B;
    --color-success: #39FF14;
    --color-input-bg: #2C1E5C;
    --color-hover: rgba(255, 0, 229, 0.1);
    --color-accent: #00F6FF;
    --color-btn-bg: rgba(255, 0, 229, 0.08);
    --color-btn-bg-hover: rgba(255, 0, 229, 0.12);
    --texture-line-color: 236, 72, 153; 
    --texture-opacity: 0.09;
    --texture-grid-size: 100px;
  }

  [data-theme='operator'] {
    /* Operator theme */
    --color-bg: #1E0000;
    --color-text-white: #FF4100;
    --color-text-primary: #FF4100;
    --color-text-secondary: #FFA500;
    --color-text-tertiary: #B37400;
    --color-text-command: #FF4100;
    --color-border: #FF4100;
    --color-border-darker: #FFA500;
    --color-active: #5D1800;
    --color-error: #FFFF00;
    --color-success: #A8FF00;
    --color-input-bg: #1A1A1A;
    --color-hover: rgba(255, 65, 0, 0.1);
    --color-accent: #FFA500;
    --color-btn-bg: rgba(255, 65, 0, 0.08);
    --color-btn-bg-hover: rgba(255, 65, 0, 0.12);
    --texture-line-color: 251, 191, 36; 
    --texture-opacity: 0.09;
    --texture-grid-size: 100px;
  }

  [data-theme='kyoto'] {
    /* Kyoto theme */
    --color-bg: #B0B0B0;
    --color-text-white: #1A1A1A;
    --color-text-primary: #1A1A1A;
    --color-text-secondary: #4A4A4A;
    --color-text-tertiary: #7A7A7A;
    --color-text-command: #D95D39;
    --color-border: #1A1A1A;
    --color-border-darker: #4A4A4A;
    --color-active: #8E8E8E;
    --color-error: #A80000;
    --color-success: #0A6D0A;
    --color-input-bg: #8E8E8E;
    --color-hover: rgba(74, 74, 74, 0.1);
    --color-accent: #39D9D9;
    --color-btn-bg: rgba(26, 26, 26, 0.05);
    --color-btn-bg-hover: rgba(26, 26, 26, 0.1);
    --texture-line-color: 220, 38, 38;  
    --texture-opacity: 0.09;
    --texture-grid-size: 110px;
  }

  /* Specific body background for Kyoto theme */
  [data-theme='kyoto'] body {
    background-color: #D95D39;
  }

  [data-theme='radar'] {
    /* Radar theme */
    --color-bg: #3C4D3A;
    --color-text-white: #B3E2A7;
    --color-text-primary: #B3E2A7;
    --color-text-secondary: #8BAA85;
    --color-text-tertiary: #5A5A5A;
    --color-text-command: #D98E39;
    --color-border: #2A2A2A;
    --color-border-darker: #2A2A2A;
    --color-active: #2F3D2D;
    --color-error: #D94639;
    --color-success: #65B354;
    --color-input-bg: #32402F;
    --color-hover: rgba(179, 226, 167, 0.1);
    --color-accent: #54B3B3;
    --color-btn-bg: rgba(179, 226, 167, 0.05);
    --color-btn-bg-hover: rgba(179, 226, 167, 0.1);
    --texture-line-color: 34, 197, 94;   
    --texture-opacity: 0.08;
    --texture-grid-size: 90px;
  }
}

@layer components {
  /* Now all classes use CSS variables - no need for theme overrides! */
  
  /* Text styles */
  .text-primary {
    color: var(--color-text-primary);
  }
  
  .text-secondary {
    color: var(--color-text-secondary);
  }
  
  .text-command {
    color: var(--color-text-command);
  }
  
  .text-white-black {
    color: var(--color-text-white);
  }
  
  .text-tertiary {
    color: var(--color-text-tertiary);
  }
  
  .text-error {
    color: var(--color-error);
  }
  
  .text-success {
    color: var(--color-success);
  }
  
  .text-accent {
    color: var(--color-accent);
  }
  
  /* Background styles */
  .bg-main {
    background-color: var(--color-bg);
  }
  
  .bg-input {
    background-color: var(--color-input-bg);
  }
  
  .bg-active {
    background-color: var(--color-active);
  }
  
  .bg-hover:hover {
    background-color: var(--color-hover);
  }
  
  /* Border styles */
  .border-primary {
    border-color: var(--color-border);
  }
  
  .border-secondary {
    border-color: var(--color-border-darker);
  }
  
  .border-active {
    border-color: var(--color-active);
  }
  
  .border-error {
    border-color: var(--color-error);
  }
  
  .border-success {
    border-color: var(--color-success);
  }
  
  /* Composite components - now they automatically adapt to theme! */
  .input-base {
    @apply w-full px-3 py-2 rounded border font-mono text-sm;
    background-color: var(--color-input-bg);
    border-color: var(--color-border);
    color: var(--color-text-primary);
  }
  
  .input-base:focus {
    @apply outline-none ring-2;
    --tw-ring-color: var(--color-border);
  }
  
  .input-error {
    border-color: var(--color-error);
    color: var(--color-error);
  }
  
  .btn-command {
    @apply border border-primary text-primary transition-colors duration-200;
    background-color: var(--color-btn-bg);
    }
  .btn-command:hover {
    background-color: var(--color-btn-bg-hover);
  }
  
  .btn-active {
    background-color: var(--color-active);
    border-color: var(--color-active);
  }
  
  .tag-badge {
    @apply text-xs px-2 py-0.5 border rounded whitespace-nowrap;
    border-color: var(--color-border);
    color: var(--color-text-primary);
  }
  
  .label-base {
    @apply block text-sm font-mono mb-1;
    color: var(--color-text-secondary);
  }
  
  .panel-base {
    @apply border rounded-md p-4;
  }

  .panel-theme {
    @apply bg-main border-secondary;
  }

  .panel-full {
    @apply panel-base panel-theme;
  }

  .title-command {
    @apply text-base mb-2 font-mono text-command;
  }

  .key-label {
    @apply text-sm font-mono text-secondary;
  }

  .value-primary {
    @apply text-xl font-mono text-primary;
  }
  
  .interactive-base {
    @apply transition-all duration-200 cursor-pointer;
  }

  .interactive-hover {
    @apply hover:opacity-80 hover:scale-[1.02];
  }

  .terminal-line {
    @apply font-mono text-sm;
    color: var(--color-text-secondary);
  }

  .terminal-prompt {
    @apply font-mono text-sm;
    color: var(--color-text-command);
  }

  .log-entry {
    @apply text-xs font-mono;
    color: var(--color-text-tertiary);
  }

  .log-timestamp {
    @apply text-xs font-mono opacity-60;
    color: var(--color-text-tertiary);
  }

  .ascii-frame {
    @apply font-mono text-xs leading-none;
    color: var(--color-text-secondary);
  }
  
  /* Layout utilities */
  .flex-center {
    @apply flex items-center justify-center;
  }

  .flex-between {
    @apply flex items-center justify-between;
  }

  .flex-col-center {
    @apply flex flex-col items-center justify-center;
  }

  .grid-responsive {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4;
  }
  
  /* Mobile modifiers */
  .mobile-full {
    @apply w-full sm:w-auto;
  }

  .hide-mobile {
    @apply hidden sm:block;
  }

  .show-mobile {
    @apply block sm:hidden;
  }
  
  /* Animations */
  .animate-fade-in {
    @apply animate-[fadeIn_0.3s_ease-in-out];
  }

  .animate-slide-up {
    @apply animate-[slideUp_0.3s_ease-out];
  }
}

/* Keyframes */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(10px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes pulseProgress {
  0% {
    opacity: 0.7;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.7;
  }
}

@layer utilities {
  /* Existing utility */
  .wallet-modal-override {
    background-color: transparent !important;
    color: var(--color-text-primary) !important;
  }
  
  .animate-pulse-progress {
    animation: pulseProgress 1.5s ease-in-out infinite;
  }
}

/* ============================================
   SCREEN TRANSITION ANIMATIONS
   ============================================
*/

/* Exit animation - content fading out and slightly shrinking */
@keyframes screen-exit {
  from {
    opacity: 1;
    transform: scale(1) translateZ(0); /* translateZ forces GPU acceleration */
  }
  to {
    opacity: 0;
    transform: scale(0.98) translateZ(0); /* 2% shrink creates depth */
  }
}

/* Enter animation - content fading in and slightly growing */
@keyframes screen-enter {
  from {
    opacity: 0;
    transform: scale(1.02) translateZ(0); /* Start 2% larger */
  }
  to {
    opacity: 1;
    transform: scale(1) translateZ(0); /* Return to normal size */
  }
}

/* Animation classes used by AnimatedScreenTransition component */
.animate-screen-exit {
  animation: screen-exit 200ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
  /* cubic-bezier creates a smooth, natural motion */
  /* 'forwards' keeps the final state after animation */
}

.animate-screen-enter {
  animation: screen-enter 200ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* ============================================
   ACCESSIBILITY: Reduced Motion Support
   ============================================
*/
@media (prefers-reduced-motion: reduce) {
  @keyframes screen-exit {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
  
  @keyframes screen-enter {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  .animate-screen-exit,
  .animate-screen-enter {
    animation-duration: 150ms; /* Slightly faster for reduced motion */
  }
}

/* ============================================
   OPTIONAL: Advanced Animation Variants
   ============================================
*/

/* Slide animations for directional navigation */

@keyframes slide-out-left {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(-20px);
  }
}

@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-out-left {
  animation: slide-out-left 250ms ease-in-out forwards;
}

.animate-slide-in-right {
  animation: slide-in-right 250ms ease-in-out forwards;
}

/* Special boot animation for ProfileBoot screen */

@keyframes terminal-boot {
  0% {
    opacity: 0;
    transform: scale(0.95) translateY(10px);
  }
  50% {
    opacity: 0.5;
    transform: scale(0.98) translateY(5px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.animate-terminal-boot {
  animation: terminal-boot 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

/* Glitch effect for error states or special transitions */

@keyframes glitch {
  0%, 100% {
    transform: translate(0);
    filter: hue-rotate(0deg);
  }
  20% {
    transform: translate(-1px, 1px);
    filter: hue-rotate(90deg);
  }
  40% {
    transform: translate(1px, -1px);
    filter: hue-rotate(180deg);
  }
  60% {
    transform: translate(-1px, -1px);
    filter: hue-rotate(270deg);
  }
  80% {
    transform: translate(1px, 1px);
    filter: hue-rotate(360deg);
  }
}

.animate-glitch {
  animation: glitch 200ms steps(5) forwards;
}

/* Scrollbar */

@media (min-width: 768px) {
  /* Webkit (Chrome, Safari) */
  *::-webkit-scrollbar {
    width: 4px;
  }
  
  *::-webkit-scrollbar-track {
    background: var(--color-hover);
    border-radius: 4px;
  }
  
  *::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 4px;
    opacity: 0.7; /* ADDED: Makes the scrollbar thumb semi-transparent */
    transition: opacity 0.2s ease-in-out; /* ADDED: Smooth transition for hover effect */
  }
  
  *::-webkit-scrollbar-thumb:hover {
    background: var(--color-accent);
    opacity: 1; /* ADDED: Makes it fully opaque on hover for better visibility */
  }
}

.terminal-texture {
  position: relative;
}

.terminal-texture::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  /* IMPORTANT: z-index must be higher than HyperspaceTunnel (0) but lower than main content */
  z-index: 1;
  opacity: var(--texture-opacity);
  
  /* Create scanline effect with horizontal lines and vertical grid */
  background-image: 
    /* Horizontal scanlines - creates the CRT monitor effect */
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(var(--texture-line-color), 0.3) 2px,
      rgba(var(--texture-line-color), 0.3) 4px
    ),
    /* Vertical grid lines - adds structure and depth */
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent var(--texture-grid-size),
      rgba(var(--texture-line-color), 0.2) var(--texture-grid-size),
      rgba(var(--texture-line-color), 0.2) calc(var(--texture-grid-size) + 2px)
    );
  
  /* Performance optimization for large screens */
  will-change: opacity;
  
  /* Smooth transition when switching themes */
  transition: opacity 0.3s ease;
}

/* Optional: Reduce texture on mobile for better performance */
@media (max-width: 768px) {
  .terminal-texture::before {
    /* Simplify to just horizontal lines on mobile */
    background-image: 
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 3px,
        rgba(var(--texture-line-color), 0.2) 3px,
        rgba(var(--texture-line-color), 0.2) 5px
      );
  }
}

/* Optional: Add a subtle vignette effect for more depth */
.terminal-texture::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 2;
  /* Radial gradient from center to edges */
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 50%,
    rgba(0, 0, 0, 0.1) 100%
  );
}

/* Auto-fill animation effects */
.auto-filling {
  @apply outline-none ring-2;
  --tw-ring-color: var(--color-border);
}

@keyframes glow {
  0%, 100% { 
    box-shadow: 0 0 5px rgba(var(--color-accent-rgb, 255, 255, 255), 0.5); 
  }
  50% { 
    box-shadow: 0 0 20px rgba(var(--color-accent-rgb, 255, 255, 255), 0.8); 
  }
}

.button-pressing {
  transform: scale(0.95);
  transition: transform 0.1s ease;
  background-color: var(--color-active) !important;
}
