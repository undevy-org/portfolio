"use strict";exports.id=5238,exports.ids=[5238],exports.modules={5238:(a,b,c)=>{c.r(b),c.d(b,{default:()=>E});var d=c(60687),e=c(43210),f=c(91096),g=c(16189),h=c(62688);let i=(0,h.A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),j=(0,h.A)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var k=c(83354),l=c(94736),m=c(40249),n=c(71840),o=c(93895);class p extends o.C{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return"wagmi@2.16.3"}}class q extends p{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function r(a={}){let b=a.config??(0,e.useContext)(n.R);if(!b)throw new q;return b}var s=c(94588),t=c(39733);let u=a=>"object"==typeof a&&!Array.isArray(a);var v=c(65406),w=c(33465),x=c(35536),y=c(31212),z=class extends x.Q{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,y.f8)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,y.EN)(b.mutationKey)!==(0,y.EN)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,v.$)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){w.jG.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context;a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c),this.#d.onSettled?.(a.data,null,b,c)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c),this.#d.onSettled?.(void 0,a.error,b,c))}this.listeners.forEach(a=>{a(this.#b)})})}},A=c(8693),B=c(676),C=c(69858),D=c(47443);function E(){let[a,b]=(0,e.useState)(""),[c,h]=(0,e.useState)(!1),[n,o]=(0,e.useState)("idle"),{theme:p,addLog:q,currentDomain:v,domainData:x,authError:E,setAuthError:F,sessionData:G,setSessionData:H,navigate:I,isTerminating:J,web3LogoutPending:K,setWeb3LogoutPending:L}=(0,f.w)(),M=(0,g.useRouter)(),{open:N}=(0,k.JS)(),{address:O,isConnected:P}=function(a={}){let b=r(a);return function(a,b,c=b,d=s.b){let f=(0,e.useRef)([]),g=(0,t.useSyncExternalStoreWithSelector)(a,b,c,a=>a,(a,b)=>{if(u(a)&&u(b)&&f.current.length){for(let c of f.current)if(!d(a[c],b[c]))return!1;return!0}return d(a,b)});return(0,e.useMemo)(()=>{if(u(g)){let a={...g},b={};for(let[c,d]of Object.entries(a))b={...b,[c]:{configurable:!1,enumerable:!0,get:()=>(f.current.includes(c)||f.current.push(c),d)}};return Object.defineProperties(a,b),a}return g},[g])}(a=>(0,l.F)(b,{onChange:a}),()=>(0,m.s)(b))}(),{disconnectAsync:Q}=function(a={}){let{mutation:b}=a,c=r(a),d={mutationFn:a=>(0,B.Z)(c,a),mutationKey:["disconnect"]},{mutate:f,mutateAsync:g,...h}=function(a,b){let c=(0,A.jE)(void 0),[d]=e.useState(()=>new z(c,a));e.useEffect(()=>{d.setOptions(a)},[d,a]);let f=e.useSyncExternalStore(e.useCallback(a=>d.subscribe(w.jG.batchCalls(a)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),g=e.useCallback((a,b)=>{d.mutate(a,b).catch(y.lQ)},[d]);if(f.error&&(0,y.GU)(d.options.throwOnError,[f.error]))throw f.error;return{...f,mutate:g,mutateAsync:f.mutate}}({...b,...d});return{...h,connectors:(function(a={}){let b=r(a);return(0,e.useSyncExternalStore)(a=>(0,C.b)(b,{onChange:a}),()=>(0,D.W)(b),()=>(0,D.W)(b))})({config:c}).map(a=>a.connector),disconnect:f,disconnectAsync:g}}(),R=(0,e.useRef)(!1),S=(0,e.useRef)(!1);(0,e.useRef)(null);let T=(0,e.useRef)(!1);(0,e.useCallback)(async a=>{if(R.current){console.log("[WEB3 AUTH] Blocked: Logout in progress"),q("WEB3 LOGIN: Skipped - logout in progress");return}if(S.current)return void console.log("[WEB3 AUTH] Blocked: Already initialized");if(T.current)return void console.log("[WEB3 AUTH] Blocked: User intentionally logged out");console.log("[WEB3 AUTH] Starting authentication for:",a),S.current=!0,o("connecting"),q(`WEB3 CONNECTED: ${a}`);try{let b=await fetch("/api/session?code=0XDEFI2311");if(b.ok){let c=await b.json(),d={...c,isWeb3User:!0,walletAddress:a,meta:{...c.meta,company:"Web3 User",accessMethod:"web3"},profile:{...c.profile,greeting_name:"Web3 User",summary:{...c.profile?.summary,title:"Web3 Authenticated User",specialization:"Authenticated via Web3",background:"Decentralized Access"}}};H(d),q(`WEB3 ACCESS GRANTED: ${a}`),o("connected"),I("MainHub",!1),M.push(`/?web3=${a}`)}else console.error("[WEB3 AUTH] Server returned error:",b.status),q("ERROR: Failed to create Web3 session"),F("Failed to authenticate with Web3. Please try again."),o("idle"),P&&await Q(),S.current=!1}catch(a){if(console.error("[WEB3 AUTH] Exception during authentication:",a),q("ERROR: Web3 session creation failed"),F("Network error during Web3 authentication"),o("idle"),P)try{await Q()}catch(a){console.error("[WEB3 AUTH] Error during cleanup disconnect:",a)}S.current=!1}},[P,Q,H,q,I,M,F]);let U=async()=>{if(!a.trim()){q("ERROR: No access code provided"),F("Please enter an access code");return}h(!0),F(null),q(`AUTHENTICATING: ${a}`),M.push(`/?code=${a}`)};return(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)("input",{type:"text",value:a,onChange:a=>b(a.target.value.toUpperCase()),onKeyPress:a=>{"Enter"!==a.key||c||P||U()},className:`w-full p-3 mb-3 rounded font-mono text-lg tracking-wider ${"dark"===p?"bg-dark-input-bg text-dark-text-primary":"bg-light-input-bg text-light-text-primary"} border ${E?"dark"===p?"border-dark-error":"border-light-error":"dark"===p?"border-dark-border":"border-light-border"} ${E?"animate-pulse":""}`,placeholder:"ENTER ACCESS CODE",autoFocus:!0,disabled:c||P}),E&&(0,d.jsx)("div",{className:`mb-3 text-sm ${"dark"===p?"text-dark-error":"text-light-error"}`,children:E}),(0,d.jsx)("button",{onClick:U,disabled:c||P,className:`w-full p-3 mb-3 border rounded transition-colors ${"dark"===p?"border-dark-border hover:bg-dark-hover text-dark-text-primary":"border-light-border hover:bg-light-hover text-light-text-primary"} ${c||P?"opacity-50 cursor-not-allowed":""}`,children:c?"AUTHENTICATING...":"AUTHENTICATE"}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsxs)("button",{onClick:()=>{let a;a=x?.telegram?x.telegram:process.env.NEXT_PUBLIC_DEFAULT_CONTACT_TELEGRAM||"https://t.me/example",q(`EXTERNAL LINK: Telegram ${a}`),window.open(a,"_blank")},disabled:P,className:`flex-1 p-3 border rounded flex items-center justify-center gap-2 transition-colors ${"dark"===p?"border-dark-border hover:bg-dark-hover text-dark-text-primary":"border-light-border hover:bg-light-hover text-light-text-primary"} ${P?"opacity-50 cursor-not-allowed":""}`,children:[(0,d.jsx)(i,{className:"w-4 h-4"}),"GET CODE"]}),(0,d.jsxs)("button",{onClick:()=>{if(P)return void q("WEB3 LOGIN: Already connected");q("WEB3 LOGIN: Opening wallet connection modal"),o("connecting"),N()},disabled:R.current||"disconnecting"===n||K,className:`flex-1 p-3 border rounded flex items-center justify-center gap-2 transition-colors ${"dark"===p?"border-dark-border hover:bg-dark-hover text-dark-text-primary":"border-light-border hover:bg-light-hover text-light-text-primary"} ${R.current||"disconnecting"===n||K?"opacity-50 cursor-not-allowed":""}`,children:[(0,d.jsx)(j,{className:"w-4 h-4"}),P?`${O.slice(0,6)}...${O.slice(-4)}`:"connecting"===n?"CONNECTING...":"WEB3 LOGIN"]})]}),P&&"connecting"===n&&(0,d.jsx)("div",{className:`mt-2 text-center text-xs ${"dark"===p?"text-dark-text-secondary":"text-light-text-secondary"}`,children:"Processing Web3 authentication..."}),("disconnecting"===n||K)&&(0,d.jsx)("div",{className:`mt-2 text-center text-xs ${"dark"===p?"text-dark-text-secondary":"text-light-text-secondary"}`,children:"Disconnecting wallet..."})]})}},10907:(a,b,c)=>{var d=c(43210),e=c(57379),f="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},g=e.useSyncExternalStore,h=d.useRef,i=d.useEffect,j=d.useMemo,k=d.useDebugValue;b.useSyncExternalStoreWithSelector=function(a,b,c,d,e){var l=h(null);if(null===l.current){var m={hasValue:!1,value:null};l.current=m}else m=l.current;var n=g(a,(l=j(function(){function a(a){if(!i){if(i=!0,g=a,a=d(a),void 0!==e&&m.hasValue){var b=m.value;if(e(b,a))return h=b}return h=a}if(b=h,f(g,a))return b;var c=d(a);return void 0!==e&&e(b,c)?(g=a,b):(g=a,h=c)}var g,h,i=!1,j=void 0===c?null:c;return[function(){return a(b())},null===j?void 0:function(){return a(j())}]},[b,c,d,e]))[0],l[1]);return i(function(){m.hasValue=!0,m.value=n},[n]),k(n),n}},39733:(a,b,c)=>{a.exports=c(10907)},53332:(a,b,c)=>{var d=c(43210),e="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},f=d.useState,g=d.useEffect,h=d.useLayoutEffect,i=d.useDebugValue;function j(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!e(a,c)}catch(a){return!0}}var k="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(a,b){return b()}:function(a,b){var c=b(),d=f({inst:{value:c,getSnapshot:b}}),e=d[0].inst,k=d[1];return h(function(){e.value=c,e.getSnapshot=b,j(e)&&k({inst:e})},[a,c,b]),g(function(){return j(e)&&k({inst:e}),a(function(){j(e)&&k({inst:e})})},[a]),i(c),c};b.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:k},57379:(a,b,c)=>{a.exports=c(53332)}};